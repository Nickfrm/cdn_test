(function(){"use strict";var e={8124:function(e,t,r){var s=r(6369),o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},n=[],i=r(1001),a={},l=(0,i.Z)(a,o,n,!1,null,null,null),u=l.exports,d=r(2631),c=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("div",{staticClass:"wrap"},[t("h1",[e._v("Simple Video Player Example")]),t("VideoPlayer",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)])},h=[],f=function(){var e=this,t=e._self._c;return e.isSupported?t("div",[t("div",[t("label",{attrs:{for:"src"}},[e._v("Source:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.src,expression:"src"}],attrs:{type:"text",id:"src"},domProps:{value:e.src},on:{change:e.changeSource,input:function(t){t.target.composing||(e.src=t.target.value)}}})]),t("video",{ref:"video",staticClass:"video",attrs:{width:"100%",controls:""}}),t("div",{staticClass:"grid"},[t("div",{staticClass:"grid-item"},[t("h4",[e._v("Total time played")]),t("pre",[e._v(e._s(e.totalPlayedTime)+" s")]),t("h4",[e._v("Total buffer length")]),t("pre",[e._v(e._s(e.totalBufferedLength)+" s")])]),t("div",{staticClass:"grid-item"},[t("h4",[e._v("Status")]),t("pre",{ref:"status",staticClass:"status"},[e._v(e._s(e.logs))])])])]):t("div",{staticClass:"err-msg"},[e._v(" Sorry, your browser doesn't support MediaSource Extensions. ")])},p=[],v=r(137),g=r.n(v),m={name:"VideoPlayer",props:{msg:String},data(){return{logs:"",src:"https://live-streams.cdnvideo.ru/cdnvideo/caminandes/playlist.m3u8",hls:null,played:null,buffered:null}},mounted(){if(this.isSupported){this.addSource(this.src);let e=this.$refs.video;e.addEventListener("timeupdate",(e=>{this.updateProp(e.target,"played")})),e.addEventListener("progress",(e=>{this.updateProp(e.target,"buffered")}))}},computed:{isSupported(){return g().isSupported()},totalPlayedTime(){return this.sumTimeRanges("played")},totalBufferedLength(){return this.sumTimeRanges("buffered")}},methods:{addLog(e){this.logs+=`${e}\n`,this.scrollToLastLog()},scrollToLastLog(){s.ZP.nextTick((()=>this.$refs.status.scrollTop=this.$refs?.status.scrollHeight))},changeSource(){this.hls.destroy(),this.addLog("Media element detached"),this.addSource(this.src)},addSource(e){this.hls=new(g()),this.hls.attachMedia(this.$refs.video),this.hls.on(g().Events.MEDIA_ATTACHED,(()=>{this.addLog("video and hls.js are now bound together"),this.addLog(`Loading ${this.src}`),this.hls.loadSource(e),this.hls.on(g().Events.MANIFEST_PARSED,((e,t)=>{this.addLog("manifest loaded, found "+t.levels.length+" quality level")}))})),this.handleError()},handleError(){this.hls.on(g().Events.ERROR,((e,t)=>{if(t.fatal)switch(t.type){case g().ErrorTypes.NETWORK_ERROR:this.addLog("fatal network error encountered, try to recover"),this.hls.startLoad();break;case g().ErrorTypes.MEDIA_ERROR:this.addLog("fatal media error encountered, try to recover"),this.hls.recoverMediaError();break;default:this.hls.destroy();break}}))},updateProp(e,t){this[t]=e[t]},sumTimeRanges(e){let t=0;if(this[e])for(let r=0;r<this[e].length;r++)t+=this[e].end(r)-this[e].start(r);return t.toFixed(3)}}},y=m,_=(0,i.Z)(y,f,p,!1,null,"69b597fe",null),b=_.exports,E={name:"HomeView",components:{VideoPlayer:b}},w=E,P=(0,i.Z)(w,c,h,!1,null,"32eedbe4",null),T=P.exports;s.ZP.use(d.Z);const S=[{path:"/",name:"home",component:T}],L=new d.Z({mode:"history",base:"/cdn_test/",routes:S});var O=L,x=r(3822);s.ZP.use(x.ZP);var R=new x.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{}});s.ZP.config.productionTip=!1,new s.ZP({router:O,store:R,render:e=>e(u)}).$mount("#app")}},t={};function r(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,r),n.exports}r.m=e,function(){var e=[];r.O=function(t,s,o,n){if(!s){var i=1/0;for(d=0;d<e.length;d++){s=e[d][0],o=e[d][1],n=e[d][2];for(var a=!0,l=0;l<s.length;l++)(!1&n||i>=n)&&Object.keys(r.O).every((function(e){return r.O[e](s[l])}))?s.splice(l--,1):(a=!1,n<i&&(i=n));if(a){e.splice(d--,1);var u=o();void 0!==u&&(t=u)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[s,o,n]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,n,i=s[0],a=s[1],l=s[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(o in a)r.o(a,o)&&(r.m[o]=a[o]);if(l)var d=l(r)}for(t&&t(s);u<i.length;u++)n=i[u],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(d)},s=self["webpackChunkcdn_test"]=self["webpackChunkcdn_test"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=r.O(void 0,[998],(function(){return r(8124)}));s=r.O(s)})();
//# sourceMappingURL=app.d2c61a14.js.map